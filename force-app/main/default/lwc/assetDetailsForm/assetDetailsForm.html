<template>
  <!-- <template if:true={warnings}>
  <div class="slds-notify slds-notify_alert slds-alert_error" role="alert">
    <span class="slds-assistive-text">error</span>
    <span class="slds-icon_container slds-icon-utility-error slds-m-right_x-small" title="Description of icon when needed">
    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#error"></use>
    </svg>
    </span>
    <h2>
      <ul>
    <template for:each={warnings} for:item="w">
      <li key={w}> {w} </li>
    </template>
    </ul>
    </h2>
    <div class="slds-notify__close">
    <button class="slds-button slds-button_icon slds-button_icon-small slds-button_icon-inverse" title="Close">
    <svg class="slds-button__icon" aria-hidden="true">
    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>
    </svg>
    <span class="slds-assistive-text">Close</span>
    </button>
    </div>
    </div>
    </template> -->

  <lightning-spinner if:false={displayComp} size="small" alternative-text="loading..." variant="brand" ></lightning-spinner>
    <template if:true={displayComp}>

        

  <!-- "Asset Details - LTV for {{!opp.Name}}" -->
    <lightning-card>

        <div class="slds-page-header slds-page-header_record-home" style="padding:0.5rem;background:transparent">
            <div class="slds-page-header__row">
              <div class="slds-page-header__col-title">
                <div class="slds-media">
                  <div class="slds-media__figure">
                    <!-- <lightning-icon size="small" icon-name="action:description" alternative-text="Asset Details" title="Asset Details" ></lightning-icon> -->
                  </div>
                  <div class="slds-media__body">
                    <div class="slds-page-header__name">
                      <div class="slds-page-header__name-title">
                        
                        <h1><b>
                          <span class="slds-page-header__title" title="Asset Details" style="font-weight: 500">Asset Details - LTV for {opp.Name}</span></b>
                        </h1>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="slds-page-header__col-actions">
                <div class="slds-page-header__controls">
                  <div class="slds-page-header__control">
                  </div>
                  <div class="slds-page-header__control">
                    <template if:true={visibleProgress}>
                      <lightning-progress-bar value={progress}></lightning-progress-bar>
                    </template>
                    <!-- <template if:false={visibleProgress}> -->
                    <lightning-button-group>
                      <lightning-button  label="PPSR Certificate" onclick={requestPPSRCertificate} icon-name="utility:ribbon" disabled={visibleProgress}></lightning-button>
                      <lightning-button label="Save Asset Details" onclick={savePdf} icon-name="utility:save" disabled={visibleProgress}></lightning-button>
                      <lightning-button label="Save for Pre-approval" onclick={savePreApproval} icon-name="utility:record_lookup" disabled={visibleProgress}></lightning-button>
                      <lightning-button label="Save for Amendment" onclick={saveAmendment} icon-name="utility:record_update" disabled={visibleProgress}></lightning-button>
                      <lightning-button label="Save for Formal Approval" onclick={saveFormalApproval} icon-name="utility:retail_execution" disabled={visibleProgress}></lightning-button>
                      <template if:true={isUserSettlementTeam}>
                        <lightning-button label="Private Sale Tax Invoice" onclick={goPrivateSaleTaxInvoice} icon-name="utility:discounts"></lightning-button>
                      </template>
                  </lightning-button-group>
                <!-- </template> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
          
        <!-- <lightning-card > -->
            <div class="slds-grid slds-gutters slds-p-around_small form-content">
                <!-- left column -->
                <div class="slds-col slds-size_1-of-3 ">

                    <!-- ||||- -->
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                          <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                              <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                  <use xlink:href="/../contentassets/standard-sprite/svg/symbols.svg"></use>
                                </svg>
                                <span class="slds-assistive-text">account</span>
                              </span>
                            </div>
                            <div class="slds-media__body">
                              <h2 class="slds-card__header-title">
                                  <span>Asset</span>
                              </h2>
                            </div>
                          </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <lightning-combobox name="assetType" label="Asset Type" onchange={loadNewUsedYearOptions} value={assetType} options={assetTypes}></lightning-combobox>
                            <fieldset class="slds-form-element">
                                <legend class="slds-form-element__legend slds-form-element__label"><abbr class="slds-required" title="required">*</abbr>Condition</legend>
                                <div class="slds-form-element__control">
                                <div class="slds-radio_button-group">
                                <template for:each={newOrUsedOptions} for:item='item'>
                                    <span class="slds-button slds-radio_button" key={item}>
                                        <input type="radio" name="newUsed" id={item.value} value={item.value} onchange={loadNewUsedYearOptions} class="validate" checked={item.checked} />
                                        <label class="slds-radio_button__label" for={item.value}>
                                        <span class="slds-radio_faux">{item.label}</span>
                                        </label>
                                    </span>
                                </template>
                                    </div>
                                </div>
                            </fieldset>

                            <!-- <div class="slds-form__row" style="display: inline-block; height:10px">
                                <lightning-radio-group 
                                    name="newUsed"
                                    label="Condition"
                                    options={newOrUsedOptions}
                                    onchange={loadNewUsedYearOptions}
                                    value={newUsed}
                                    type="radio"
                                    class="validate" required></lightning-radio-group></div> -->

                            <lightning-combobox type="text" name="year" label="Year of Vehicle" value={year} onchange={loadLenderMakeOptions} options={yearSelect} class="validate"  required></lightning-combobox>
                              </div>
                              </article>
                              <!-- ||||- -->
                            
                    <!-- ||||- -->
                    <article class="slds-card" hidden={detailsIsVisible}>
                      <div class="slds-card__header slds-grid">
                            <div class="slds-media__figure">
                              <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                  <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Details</span>
                              </span>
                            </div>
                            <div class="slds-media__body">
                              <h2 class="slds-card__header-title">
                               
                                  <span>Details</span>
                            
                              </h2>
                            </div>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                        <template if:true={dyanamicSection}>
                            <lightning-combobox name="make" label="Make" value={make} options={makeSelect} onchange={loadMakeModelOrFamilyOptions}  disabled={isAssetCompleted1}  class="validate"  required></lightning-combobox>
                            <lightning-combobox name="model" label="Model" value={model} options={modelSelect} onchange={loadModelVariantOptions} disabled={isAssetCompleted2}  class="validate"  required></lightning-combobox>
                            <lightning-combobox name="variant" label="Variant" value={variantDesc} options={variantSelect} onchange={loadVariantSeriesOptions}  disabled={isAssetCompleted3} class="validate"  required></lightning-combobox>
                            <lightning-combobox name="series" label="Series" value={series} options={seriesSelect} onchange={setSeries} disabled={isAssetCompleted4}  class="validate"  required></lightning-combobox>
                        </template>

                        <template if:false={dyanamicSection}>
                            <lightning-input name="make" label="Make" value={make}  onchange={changeDetails}  class="validate"  required></lightning-input>
                            <lightning-input name="model" label="Model" value={model}  onchange={changeDetails}   class="validate"  required></lightning-input>
                            <lightning-input name="variant" label="Variant" value={variantDesc}  onchange={changeDetails}   class="validate"  required></lightning-input>
                            <lightning-input  name="series" label="Series" value={series}  onchange={changeDetails}  class="validate"  required></lightning-input>
                        </template>

                        </div>
                        </article>
                        <!-- ||||- -->

                        <!-- matching records element -->
                        <div class="c-container">
                          

                                      <!-- isDetailed == 0 -->
                                      <template if:true={IsDetail0}>
                                        <template if:true={carsList}>
                                          <span style="width: 85%;"  class="slds-m-left_medium">
                                            Matching Records: {carListLen}
                                            </span>
                                        <template for:each={carsList} for:item="q">
                                          <lightning-layout-item flexibility="auto" padding="around-small" class="custom-box"  key={q.Id}>
                                            <table style="width: 85%;"  class="slds-m-left_medium">
                                                <tr>
                                                    <td colspan="2" style="background: #0099d0;
                                                    color: #ffffff !important;
                                                    padding: 5px 10px 5px 15px;
                                                    font-weight: bold;">
                                                        <span>{q.Year__c} {glassMake.Name} {q.Family__c} {q.Description__c} {q.Series__c} {q.Style__c} {q.CC__c} cc {q.Engine__c} {q.Size__c} {q.Cylinders__c} {q.Transmission__c}</span>                                        </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">
                                                        <!-- <apex:outputText value="OLDER LIGHT COMMERCIAL" rendered="{!q.Model__r.Type_Source__c = 'OLC'}"/>
                                                        <apex:outputText value="OLDER CARS" rendered="{!q.Model__r.Type_Source__c = 'OCG'}"/>
                                                        <apex:outputText value="LIGHT COMMERCIAL VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'CVG'}"/>
                                                        <apex:outputText value="PASSENGER VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'PVG'}"/> -->

                                                        <output if:true={isOlderLightCommercial} >OLDER LIGHT COMMERCIAL</output>
                                                        <output if:true={isOlderCars}>OLDER CARS</output>
                                                        <output if:true={isLightCommercialVehicles} >LIGHT COMMERCIAL VEHICLES</output>
                                                        <output if:true={isPassengerVehicles} >PASSENGER VEHICLES</output>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Date Rel: {q.Release_Date__c}
                                                    </td>
                                                    <td>
                                                        NVIC: {q.NVIC__c}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        RRP: 
                                                        <lightning-formatted-number value={q.New_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                    </td>
                                                    <td>
                                                        Trade L: 
                                                        <lightning-formatted-number value={q.Trade_Low_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                    </td>
                                                </tr>
                                                <td>
                                                    Trade: 
                                                    <lightning-formatted-number value={q.Trade_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                </td>
                                                <td>
                                                    Retail: 
                                                    <lightning-formatted-number value={q.Retail_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                </td>
                                                <tr>
                                                    <td style="color: red;">
                                                      {q.Average_Kms__c}000 Km
                                                    </td>
                                                    <td align="right">
                                                        <lightning-button variant="brand: outline" class="slds-float_right" icon-name="utility:forward" icon-position="right" name="SelectBtn" value={q.Code__c} label="Select" title="Select" onclick={loadVariantFactoryOptions} ></lightning-button>
                                                    </td>
                                                </tr>
                                            </table>
                                          </lightning-layout-item>
                                            </template>
                                    </template>
                                </template>

                                  <!-- isDetailed == 2 -->
                                  <template if:true={IsDetail2}>

                                    <template if:true={glassVariant}>
                                        <template if:true={glassMake}>

                                          <lightning-layout-item flexibility="auto" padding="around-small" class="custom-box"  key={q.Id}>
                                            <table style="width: 85%;"  class="slds-m-left_medium">
                                            <tr>
                                                <td colspan="2" style="background: #0099d0;
                                                color: #ffffff !important;
                                                padding: 5px 10px 5px 15px;
                                                font-weight: bold;">
                                                    <span>{glassVariant.Year__c} {glassMake.Name} {glassVariant.Family__c} {glassVariant.Description__c} {glassVariant.Series__c} {glassVariant.Style__c} {glassVariant.CC__c} cc {glassVariant.Engine__c} {glassVariant.Size__c} {glassVariant.Cylinders__c} {glassVariant.Transmission__c}</span>                                        </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2">
                                                    <!-- <apex:outputText value="OLDER LIGHT COMMERCIAL" rendered="{!q.Model__r.Type_Source__c = 'OLC'}"/>
                                                    <apex:outputText value="OLDER CARS" rendered="{!q.Model__r.Type_Source__c = 'OCG'}"/>
                                                    <apex:outputText value="LIGHT COMMERCIAL VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'CVG'}"/>
                                                    <apex:outputText value="PASSENGER VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'PVG'}"/> -->

                                                    <output if:true={isOlderLightCommercial} >OLDER LIGHT COMMERCIAL</output>
                                                    <output if:true={isOlderCars}>OLDER CARS</output>
                                                    <output if:true={isLightCommercialVehicles} >LIGHT COMMERCIAL VEHICLES</output>
                                                    <output if:true={isPassengerVehicles} >PASSENGER VEHICLES</output>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    Date Rel: {glassVariant.Release_Date__c}
                                                </td>
                                                <td>
                                                    NVIC: {glassVariant.NVIC__c}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    RRP: 
                                                    <lightning-formatted-number value={variantNewPrice} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                </td>
                                                <td>
                                                    Trade L: 
                                                    <lightning-formatted-number value={glassVariant.Trade_Low_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                </td>
                                            </tr>
                                            <td>
                                                Trade: 
                                                <lightning-formatted-number value={glassVariant.Trade_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                            </td>
                                            <td>
                                                Retail: 
                                                <lightning-formatted-number value={glassVariant.Retail_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                            </td>
                                            <tr>
                                                <td style="color: red;">
                                                  {glassVariant.Average_Kms__c}000 Km
                                                </td>
                                                <td align="right">
                                                    <lightning-button variant="brand: outline" class="slds-float_right" icon-name="utility:list" icon-position="right" name="backToList1" label="List" title="Select" onclick={loadVariantFactoryOptions} ></lightning-button>
                                                </td>
                                            </tr>
                                        </table>
                                        </lightning-layout-item>
                                        </template>
                                    </template>
                              </template>

                              <!-- isDetailed == 3 -->
                              <template if:true={IsDetail3}>

                                <template if:true={glassVariant}>
                                    <template if:true={glassMake}>

                                <lightning-layout-item flexibility="auto" padding="around-small" class="custom-box"  key={q.Id}>
                                  <table style="width: 85%;"  class="slds-m-left_medium">
                                    <tr>
                                        <td colspan="2" style="background: #0099d0;
                                        color: #ffffff !important;
                                        padding: 5px 10px 5px 15px;
                                        font-weight: bold;">
                                            <span>{glassVariant.Year__c} {glassMake.Name} {glassVariant.Family__c} {glassVariant.Description__c} {glassVariant.Series__c} {glassVariant.Style__c} {glassVariant.CC__c} cc {glassVariant.Engine__c} {glassVariant.Size__c} {glassVariant.Cylinders__c} {glassVariant.Transmission__c}</span>                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <!-- <apex:outputText value="OLDER LIGHT COMMERCIAL" rendered="{!q.Model__r.Type_Source__c = 'OLC'}"/>
                                            <apex:outputText value="OLDER CARS" rendered="{!q.Model__r.Type_Source__c = 'OCG'}"/>
                                            <apex:outputText value="LIGHT COMMERCIAL VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'CVG'}"/>
                                            <apex:outputText value="PASSENGER VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'PVG'}"/> -->

                                            <output if:true={isOlderLightCommercial} >OLDER LIGHT COMMERCIAL</output>
                                            <output if:true={isOlderCars}>OLDER CARS</output>
                                            <output if:true={isLightCommercialVehicles} >LIGHT COMMERCIAL VEHICLES</output>
                                            <output if:true={isPassengerVehicles} >PASSENGER VEHICLES</output>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Date Rel: {glassVariant.Release_Date__c}
                                        </td>
                                        <td>
                                            NVIC: {glassVariant.NVIC__c}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            RRP: 
                                            <lightning-formatted-number value={variantNewPrice} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </td>
                                        <td>
                                            Trade L: 
                                            <lightning-formatted-number value={glassVariant.Trade_Low_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </td>
                                    </tr>
                                    <td>
                                        Trade: 
                                        <lightning-formatted-number value={glassVariant.Trade_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                    </td>
                                    <td>
                                        Retail: 
                                        <lightning-formatted-number value={glassVariant.Retail_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                    </td>
                                    <tr>
                                        <td style="color: red;">
                                          {glassVariant.Average_Kms__c}000 Km
                                        </td>
                                        <td align="right">
                                            <lightning-button variant="brand: outline" class="slds-float_right" name="backToList1" label="List" icon-name="utility:list" icon-position="right" title="Select" onclick={loadVariantFactoryOptions}></lightning-button>
                                        </td>
                                    </tr>
                                </table>                                      
                                </lightning-layout-item>
                                </template>
                             </template>
                             </template>
                       </div>

                        <!-- matching records element end-->

                        <footer class="slds-card__footer"></footer>
      
                      <!-- ||||- -->

                       <!-- ||||- -->
                    <template if:true={displayRedbookForm}>
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                          <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                              <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                  <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Redbook Details</span>
                              </span>
                            </div>
                            <div class="slds-media__body">
                              <h2 class="slds-card__header-title">
                                <a href="#" class="slds-card__header-link slds-truncate" title="Redbook Details">
                                  <span>Redbook Details</span>
                                </a>
                              </h2>
                            </div>
                          </header>
                        </div>
                        <template if:true={oppty.data}>
                            <div class="slds-m-around_medium">
                                <p>{Name}</p>
                            </div>
                        </template>
                        <div class="slds-card__body slds-card__body_inner">
                            <lightning-combobox name="family" label="Family" value={family} options={familySelect} onchange={loadFamilyBadgeOptions}></lightning-combobox>
                            <lightning-combobox name="assetType" label="Badge" value={badgeRedbook} options={badgeSelectRedbook} onchange={loadBadgeVariantOptions}></lightning-combobox>
                            <lightning-combobox name="assetType" label="Variant" value={variantRedbook} options={variantSelectRedbook} onchange={getVehicleKey}></lightning-combobox>
                            <lightning-input name="assetType" label="Redbook Key" value={toName} disabled></lightning-input>
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                    </template>
                      <!-- ||||- -->

                       <!-- ||||- -->
                    <template if:true={dyanamicSection}>
                      <template if:true={showOptions}>
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Factory Options</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <span>Factory Options</span>
                      
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <!-- <lightning-input type="toggle" label="Factory Options" name="factoryOptions"></lightning-input> -->
                            <!-- <template if:true={assetOptionsSelect}> -->
                                <lightning-checkbox-group name="Checkbox Group"
                                    options={assetOptionsSelect}
                                    value={assetOptions}
                                    onchange={calculateFactoryOptions}>
                                </lightning-checkbox-group>
                            <!-- </template> -->
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                      </template>
                    </template>
                      <!-- ||||- -->

                      <!-- ||||- -->
                    <template if:true={dyanamicSection}>
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Estimation</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <span>Estimation</span>
                               
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner" style="overflow-x: auto;">
                            <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_striped" cellpadding="2">
                                <tr>
                                    <td>
                                        <!-- <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>&nbsp; -->
                                    </td>
                                    <td>RRP</td>
                                    <td>
                                        Trade Low 
                                    </td>
                                    <td>
                                        Trade 
                                    </td>
                                    <td>  
                                        Retail
                                    </td>
                                </tr>
                                <tr>
                                    <td>Glass's Value</td>
                                    <td>
                                  
                                            <lightning-formatted-number value={variantNewPrice} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                      
                                    </td>
                                    <td>
                                       
                                            <lightning-formatted-number value={tradeLowGlassValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                 
                                    </td>
                                    <td>
                                   
                                            <lightning-formatted-number value={tradeGlassValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                       
                                    </td>
                                    <td>
                             
                                            <lightning-formatted-number value={retailGlassValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                      
                                    </td>
                                </tr>
                                <tr>
                                    <td>KM Adjustment</td>
                                    <td>&nbsp;</td>
                                    <td>
                                 
                                            <lightning-formatted-number value={totalTradeLowPriceKms} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                
                                    </td>
                                    <td>
                                  
                                            <lightning-formatted-number value={totalTradePriceKms} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                   
                                    </td>
                                    <td>
                                     
                                            <lightning-formatted-number value={totalRetailPriceKms} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                     
                                    </td>
                                </tr>
                                <tr>
                                    <td>Value of Options</td>
                                    <td>
                                   
                                            <lightning-formatted-number value={totalPriceOptions} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                      
                                    </td>
                                    <td>
                                        <lightning-formatted-number value={totalTradeLowPriceOptions} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                     
                                    </td>
                                    <td>
                                        <lightning-formatted-number value={totalTradePriceOptions} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </td>
                                    <td>
                                        <lightning-formatted-number value={totalRetailPriceOptions} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                       </td>
                                </tr>
                                <tr>
                                    <td>Adjusted Values</td>
                                    <td>
                                        <lightning-formatted-number value={totalEstimated} format-style="currency" currency-code="AUD" maximum-fraction-digits="2" class="adjustedValues"></lightning-formatted-number>
                                  
                                    </td>
                                    <td>
                                        <lightning-formatted-number value={tradeLowAdjustedValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2" class="adjustedValues"></lightning-formatted-number>
                                       
                                    </td>
                                    <td>
                                        <lightning-formatted-number value={tradeAdjustedValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2" class="adjustedValues"></lightning-formatted-number>
                                  
                                    </td>
                                    <td>
                                        <lightning-formatted-number value={reatilAdjustedValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2" class="adjustedValues"></lightning-formatted-number>
                               
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                    </template>
                      <!-- ||||- -->
                </div>

                <!-- right column -->
                <div class="slds-col slds-size_2-of-3 ">

                    <!-- ||||- -->
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">LTV</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                
                                <span>LTV</span>
                              
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-combobox name="lender" label="Lenders" value={lender} onchange={putFeesValue} options={lenderOptions} class="validate"  required></lightning-combobox>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-combobox name="typeLoan" label="Type Loan" value={typeLoan} options={typeLoanOptions} onchange={putFeesValueTypeLoan} class="validate"  required></lightning-combobox>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input name="newUsed" label="New/Used" value={newUsed} disabled></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input  label={carPriceLabel} value={ltvCarAge} disabled></lightning-input>
                                </div>

                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" name="carPrice" label={carLabelPriceSuff} value={carPrice} onchange={carPriceChange} formatter="currency" step="0.01" class="validate"  required></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" name="deposit" label="	Deposit/Trade in" onchange={depositChange} formatter="currency" step="0.01" value={deposit}></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" name="fees" label="Fees" value={fees} onchange={feesChange} formatter="currency" step="0.01" class="validate"  required></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input value={ltvFeeValue} read-only></lightning-input>
                                </div>

                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" name="warranty" placeholder="$" label="Warranty" value={warranty} onchange={warrantyChange} step="0.01"></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" name="gap" label="GAP" value={gap} onchange={gapChange} step="0.01"></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" name="lpi" label="LPI" value={lpi} onchange={lpiChange} step="0.01"></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" label="LTI" value={lti} step="0.01" onchange={ltiChange}></lightning-input>
                                </div>

                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" data-id="actualKM_" name="calculateKmsAdjustment" label="Actual KM" onchange={calculateKmsAdjustment} value={actualKms}></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" name="averageKM" label="Average KM" value={averageKM} onchange={averageKMChange} disabled></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-combobox type="text" name="Purchase_Type__c" label="Purchase Type" value={opp.Purchase_Type__c} options={purchaseTypeOptions} onchange={selectedPurchaseType}></lightning-combobox>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                </div>

                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" name="RRP" label={ltvValueLabel} value={ltvValue} formatter="currency" step="0.01"  disabled></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" name="NAF" label="NAF" value={ltvNAFValue} formatter="currency" step="0.01" disabled></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input type="number" name="LVR" label={ltvLvrLabel} value={ltvLvrValue} formatter="percent" step="1"  disabled></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                </div>
                            </div>
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                      <!-- ||||- -->

                      <!-- ||||- -->
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Vendor Details (Only mandatory at Formal Approval stage)</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <span>Vendor Details (Only mandatory at Formal Approval stage)</span>
                             
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-combobox name="Dealer_Type__c" class="dealerType" data-id="dealer" label="Dealer Type" value={opp.Dealer_Type__c} options={dealerTypeOptions} onchange={dealerValChange} required={isFormalApproval}></lightning-combobox>
                                </div>
                                <div class="slds-col slds-size_2-of-3">
                                </div>

                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input name="Dealer_Name__c" class="dealerName" data-id="dealer" label="Name" value={opp.Dealer_Name__c} onchange={dealerValChange} required={isFormalApproval}></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input name="Dealer_Contact_Name__c" data-id="dealer" label="Contact Person" value={opp.Dealer_Contact_Name__c} onchange={dealerValChange} required={isFormalApproval}></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input type="email" data-id="dealer" name="Dealer_Email__c" label="Email" value={opp.Dealer_Email__c} onchange={dealerValChange} required={isFormalApproval}></lightning-input>
                                </div>

                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input type="tel" data-id="dealer" name="Dealer_Phone_Number__c" label="Phone" value={opp.Dealer_Phone_Number__c} onchange={dealerValChange} required={isFormalApproval}></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input type="tel" data-id="dealer" name="Dealer_Mobile__c" label="Mobile" value={opp.Dealer_Mobile__c} onchange={dealerValChange} required={isFormalApproval}></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input name="Dealer_Unit_Number__c" data-id="dealer" label="Unit Number" value={opp.Dealer_Unit_Number__c} onchange={dealerValChange} required={isFormalApproval}></lightning-input>
                                </div>

                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input name="Dealer_Street_Number__c" data-id="dealer" label="Street Number" value={opp.Dealer_Street_Number__c} class="validate" onchange={dealerValChange}  required={isFormalApproval}></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input name="Dealer_Address__c" data-id="dealer" label="Street Address" value={opp.Dealer_Address__c} class="validate" onchange={dealerValChange}  required={isFormalApproval} ></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-combobox name="Dealer_Street_Type__c" data-id="dealer" label="Street Type" options={streetTypeOptions_} value={opp.Dealer_Street_Type__c} onchange={dealerValChange} required={isFormalApproval}></lightning-combobox>
                                </div>

                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input name="Dealer_Suburb__c" data-id="dealer" label="Suburb" value={opp.Dealer_Suburb__c} class="validate" onchange={dealerValChange}   required={isFormalApproval}></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input name="Dealer_Postcode__c" data-id="dealer" label="Postcode" value={opp.Dealer_Postcode__c} class="validate" onchange={dealerValChange}   required={isFormalApproval}></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-combobox name="Dealer_State__c" data-id="dealer" label="State" value={opp.Dealer_State__c} options={statesOptions} onchange={dealerValChange} required={isFormalApproval}></lightning-combobox>
                                </div>
                            </div>
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                      <!-- ||||- -->

                      <!-- ||||- -->
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Vehicle Identification (settlements to complete)</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <span>Vehicle Identification (settlements to complete)</span>
                                
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <div class="slds-grid slds-gutters slds-p-around_small form-content">
                                <div class="slds-col slds-size_1-of-5">
                                    <lightning-input name="regoNo" label="Rego No." value={rego} onchange={regoNoChange}></lightning-input>
                                  </div>
                                  <div class="slds-col slds-size_1-of-5">
                                    <lightning-combobox name="assetType" label="State" value={regoState} options={statesOptions} onchange={stateChange}></lightning-combobox>
                                  </div>
                                  <div class="slds-col slds-size_1-of-5">
                                    <lightning-input name="assetType" label="VIN" value={vin} onchange={VinChange}></lightning-input>
                                  </div>
                                  <div class="slds-col slds-size_1-of-5">
                                    <lightning-input name="assetType" label="Engine No" value={engine} onchange={engineChange}></lightning-input>
                                  </div>
                                  <div class="slds-col slds-size_1-of-5">
                                    <lightning-input name="assetType" label="Colour" value={colour} onchange={colourChange}></lightning-input>
                                  </div>
                            </div>
                            <template if:true={opp.Application_AssetDetail__r}>
                            <div class="slds-grid slds-gutters slds-p-around_small form-content">
                                <div class="slds-col slds-size_1-of-5">
                                    <lightning-input name="PPSR_Proxy_Id__c" label="Request Proxy Id." value={opp.Application_AssetDetail__r.PPSR_Proxy_Id__c} onchange={certificateChange} disabled={isSearchCertificateNumber}></lightning-input>
                                  </div>
                                  <div class="slds-col slds-size_1-of-5">
                                    <lightning-input name="PPSR_Proxy_Last_Update__c" label="Last Update" value={opp.Application_AssetDetail__r.PPSR_Proxy_Last_Update__c} onchange={certificateChange} disabled={isSearchCertificateNumber}></lightning-input>
                                  </div>
                                  <div class="slds-col slds-size_1-of-5">
                                    <lightning-input name="Search_Certificate_Number__c" label="PPSR Request No." value={opp.Application_AssetDetail__r.Search_Certificate_Number__c} onchange={certificateChange} disabled={isSearchCertificateNumber}></lightning-input>
                                  </div>
                                  <div class="slds-col slds-size_2-of-5">
                                    <lightning-input name="PPSR_Proxy_Message__c" label="Note" value={opp.Application_AssetDetail__r.PPSR_Proxy_Message__c} onchange={certificateChange} disabled={isSearchCertificateNumber}></lightning-input>
                                  </div>
                                  <!-- <div class="slds-col slds-size_1-of-5">
                                  </div> -->
                            </div>
                            </template>
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                      <!-- ||||- -->


                       <!-- ||||- -->
                    <template if:true={isVehicleDetails}>
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Vehicle Details</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <span>Vehicle Details</span>
                              
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <table class="tableSubsection" cellpadding="5">
                                <tr>
                                    <td width="12%">Make</td>
                                    <td width="26%"><h3>{makeObject.Name}</h3></td>
                                    <td width="12%">Year</td>
                                    <td width="22%">{variantObject.Year__c}</td>
                                    <td width="12%">NVIC</td>
                                    <td width="16%"><h3>{variantObject.NVIC__c}</h3></td>
                                </tr>
                                <tr>
                                    <td>GlassCode</td>
                                    <td>{variantObject.Code__c}</td>
                                    <td>Family</td>
                                    <td>{variantObject.Family__c}</td>
                                    <td>Release Date</td>
                                    <td>{variantObject.Release_Date__c}</td>
                                </tr>
                                <tr>
                                    <td>Variant</td>
                                    <td>{variantObject.Description__c}</td>
                                    <td>Style / Body</td>
                                    <td>{variantObject.Style__c}</td>
                                    <td>Series</td>
                                    <td>{variantObject.Series__c}</td>
                                </tr>
                                <tr>
                                    <td>Class</td>
                                    <td>
                                        {displayClass}
                                        </td>
                                    <td>Engine</td>
                                    <td>{variantObject.Engine__c}</td>
                                    <td>CC</td>
                                    <td>{variantObject.CC__c}</td>
                                </tr>
                                <tr>
                                    <td>Transmition</td>
                                    <td>{variantObject.Transmission__c}</td>
                                    <td>Size</td>
                                    <td>{variantObject.Size__c}</td>
                                    <td>Cylinders</td>
                                    <td>{variantObject.Cylinders__c}</td>
                                </tr>
                            </table>

                        </div>
                      </article>
                      <div class="slds-m-left_medium">
                        <template if:true={assetStandardFeautersData}>
                            <b>Standard Features</b><br>
                           <ul class="div2Columns">
                            <template if:true={assetStandardFeautersData}>
                                <template for:each={assetStandardFeautersData} for:item="feature">
                                <li key={feature}> [{feature.code}] {feature.name}</li>
                                </template>
                            </template>
                            </ul>
                        </template>
                    </div>
                    </template>
                      <!-- ||||- -->

                      
                      
                </div>
            </div>
        <!-- </lightning-card> -->

    </lightning-card>

    </template>

</template>