<template>

  <lightning-spinner if:false={displayComp} size="small" alternative-text="loading..." variant="brand" ></lightning-spinner>
    <template if:true={displayComp}>

        

  <!-- "Asset Details - LTV for {{!opp.Name}}" -->
    <lightning-card>

        <div class="slds-page-header slds-page-header_record-home" style="padding:0.5rem;background:transparent">
            <div class="slds-page-header__row">
              <div class="slds-page-header__col-title">
                <div class="slds-media">
                  <div class="slds-media__figure">
                    <!-- <span class="slds-icon_container slds-icon-standard-opportunity">
                      <svg class="slds-icon slds-page-header__icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#opportunity"></use>
                      </svg>
                    </span> -->
                  </div>
                  <div class="slds-media__body">
                    <div class="slds-page-header__name">
                      <div class="slds-page-header__name-title">
                        <h1>
                          <span>Asset Details - LTV for {opp.Name}</span>
                          <span class="slds-page-header__title" title="Asset Details">Asset Details</span>
                        </h1>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="slds-page-header__col-actions">
                <div class="slds-page-header__controls">
                  <div class="slds-page-header__control">
                   
                  </div>
                  <div class="slds-page-header__control">
                    <lightning-button-group>
                      <lightning-button  label="PPSR Certificate" onclick={requestPPSRCertificate} icon-name="utility:ribbon"></lightning-button>
                      <lightning-button label="Save Asset Details" onclick={savePdf} icon-name="utility:save"></lightning-button>
                      <lightning-button label="Save for Pre-approval" onclick={savePreApproval} icon-name="utility:record_lookup"></lightning-button>
                      <lightning-button label="Save for Amendment" onclick={saveAmendment} icon-name="utility:record_update"></lightning-button>
                      <lightning-button label="Save for Formal Approval" onclick={saveFormalApproval} icon-name="utility:retail_execution"></lightning-button>
                      <template if:true={isUserSettlementTeam}>
                        <lightning-button label="Private Sale Tax Invoice" onclick={goPrivateSaleTaxInvoice} icon-name="utility:discounts"></lightning-button>
                      </template>
                      <lightning-button label="Cancel" icon-name="utility:cancel"></lightning-button>
                  </lightning-button-group>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
        <!-- <lightning-card > -->
            <div class="slds-grid slds-gutters slds-p-around_small form-content">
                <!-- left column -->
                <div class="slds-col slds-size_1-of-3 ">

                    <!-- ||||- -->
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                          <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                              <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                  <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">account</span>
                              </span>
                            </div>
                            <div class="slds-media__body">
                              <h2 class="slds-card__header-title">
                                <a href="#" class="slds-card__header-link slds-truncate" title="Asset">
                                  <span>Asset</span>
                                </a>
                              </h2>
                            </div>
                          </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <lightning-combobox name="assetType" label="Asset Type" onchange={loadNewUsedYearOptions} value={assetType} options={assetTypes}></lightning-combobox>
                            <div class="slds-form__row">
                                <lightning-radio-group 
                                    name="newUsed"
                                    label="New / Used"
                                    options={newOrUsedOptions}
                                    onchange={loadNewUsedYearOptions}
                                    value={newUsed}
                                    type="radio" required></lightning-radio-group></div>
                                <lightning-combobox type="text" name="year" label="Year of Vehicle" value={year} onchange={loadLenderMakeOptions} options={yearSelect} required></lightning-combobox>
                              </div>
                              </article>
                              <!-- ||||- -->
                            
                    <!-- ||||- -->
                    <article class="slds-card" hidden={detailsIsVisible}>
                      <div class="slds-card__header slds-grid">
                            <div class="slds-media__figure">
                              <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                  <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Details</span>
                              </span>
                            </div>
                            <div class="slds-media__body">
                              <h2 class="slds-card__header-title">
                                <a href="#" class="slds-card__header-link slds-truncate" title="Details">
                                  <span>Details</span>
                                </a>
                              </h2>
                            </div>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                        <template if:true={dyanamicSection}>
                            <lightning-combobox name="make" label="Make" value={make} options={makeSelect} onchange={loadMakeModelOrFamilyOptions}  disabled={isAssetCompleted}  required></lightning-combobox>
                            <lightning-combobox name="model" label="Model" value={model} options={modelSelect} onchange={loadModelVariantOptions} disabled={isAssetCompleted}  required></lightning-combobox>
                            <lightning-combobox name="variant" label="Variant" value={variantDesc} options={variantSelect} onchange={loadVariantSeriesOptions}  disabled={isAssetCompleted} required></lightning-combobox>
                            <lightning-combobox name="series" label="Series" value={series} options={seriesSelect} onchange={setSeries} disabled={isAssetCompleted}  required></lightning-combobox>
                        </template>

                        <template if:false={dyanamicSection}>
                            <lightning-input name="make" label="Make" value={make}  onchange={loadMakeModelOrFamilyOptions}  required></lightning-input>
                            <lightning-input name="model" label="Model" value={model}  onchange={loadModelVariantOptions}   required></lightning-input>
                            <lightning-input name="variant" label="Variant" value={variantDesc}  onchange={loadVariantSeriesOptions}   required></lightning-input>
                            <lightning-input  name="series" label="Series" value={series}  onchange={setSeries}  required></lightning-input>
                        </template>

                        </div>
                        </article>
                        <!-- ||||- -->

                        <!-- matching records element -->
                       
                              <article class="slds-card">
                                  <div class="slds-card__header slds-grid">
                                    <div class="slds-card__body slds-card__body_inner">
                                      <!-- <template if:true={carsList}> -->

                                      <!-- isDetailed == 0 -->
                                      <template if:true={IsDetail0}>
                                        <template if:true={carsList}>
                                            Matching Records: {carListLen}
                                        <template for:each={carsList} for:item="q">
                                            <table  width="100%" key={q.Id}>
                                                <tr>
                                                    <td colspan="2" style="background: #0099d0;
                                                    color: #ffffff !important;
                                                    padding: 5px 10px 5px 15px;
                                                    font-weight: bold;">
                                                        <span>{q.Year__c} {glassMake.Name} {q.Family__c} {q.Description__c} {q.Series__c} {q.Style__c} {q.CC__c} cc {q.Engine__c} {q.Size__c} {q.Cylinders__c} {q.Transmission__c}</span>                                        </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">
                                                        <!-- <apex:outputText value="OLDER LIGHT COMMERCIAL" rendered="{!q.Model__r.Type_Source__c = 'OLC'}"/>
                                                        <apex:outputText value="OLDER CARS" rendered="{!q.Model__r.Type_Source__c = 'OCG'}"/>
                                                        <apex:outputText value="LIGHT COMMERCIAL VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'CVG'}"/>
                                                        <apex:outputText value="PASSENGER VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'PVG'}"/> -->

                                                        <output if:true={isOlderLightCommercial} >OLDER LIGHT COMMERCIAL</output>
                                                        <output if:true={isOlderCars}>OLDER CARS</output>
                                                        <output if:true={isLightCommercialVehicles} >LIGHT COMMERCIAL VEHICLES</output>
                                                        <output if:true={isPassengerVehicles} >PASSENGER VEHICLES</output>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Date Rel: {q.Release_Date__c}
                                                    </td>
                                                    <td>
                                                        NVIC: {q.NVIC__c}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        RRP: 
                                                        <lightning-formatted-number value={q.New_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                    </td>
                                                    <td>
                                                        Trade L: 
                                                        <lightning-formatted-number value={q.Trade_Low_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                    </td>
                                                </tr>
                                                <td>
                                                    Trade: 
                                                    <lightning-formatted-number value={q.Trade_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                </td>
                                                <td>
                                                    Retail: 
                                                    <lightning-formatted-number value={q.Retail_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                </td>
                                                <tr>
                                                    <td style="color: red;">
                                                      {q.Average_Kms__c}000 Km
                                                    </td>
                                                    <td align="right">
                                                        <lightning-button name="SelectBtn" value={q.Code__c} label="Select" title="Select" onclick={loadVariantFactoryOptions} ></lightning-button>
                                                    </td>
                                                </tr>
                                            </table>
                                            </template>
                                    </template>
                                </template>
      
                                  <!-- isDetailed == 2 -->
                                  <template if:true={IsDetail2}>

                                    <template if:true={glassVariant}>
                                        <template if:true={glassMake}>

                                        <table  width="100%" >
                                            <tr>
                                                <td colspan="2" style="background: #0099d0;
                                                color: #ffffff !important;
                                                padding: 5px 10px 5px 15px;
                                                font-weight: bold;">
                                                    <span>{glassVariant.Year__c} {glassMake.Name} {glassVariant.Family__c} {glassVariant.Description__c} {glassVariant.Series__c} {glassVariant.Style__c} {glassVariant.CC__c} cc {glassVariant.Engine__c} {glassVariant.Size__c} {glassVariant.Cylinders__c} {glassVariant.Transmission__c}</span>                                        </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2">
                                                    <!-- <apex:outputText value="OLDER LIGHT COMMERCIAL" rendered="{!q.Model__r.Type_Source__c = 'OLC'}"/>
                                                    <apex:outputText value="OLDER CARS" rendered="{!q.Model__r.Type_Source__c = 'OCG'}"/>
                                                    <apex:outputText value="LIGHT COMMERCIAL VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'CVG'}"/>
                                                    <apex:outputText value="PASSENGER VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'PVG'}"/> -->

                                                    <output if:true={isOlderLightCommercial} >OLDER LIGHT COMMERCIAL</output>
                                                    <output if:true={isOlderCars}>OLDER CARS</output>
                                                    <output if:true={isLightCommercialVehicles} >LIGHT COMMERCIAL VEHICLES</output>
                                                    <output if:true={isPassengerVehicles} >PASSENGER VEHICLES</output>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    Date Rel: {glassVariant.Release_Date__c}
                                                </td>
                                                <td>
                                                    NVIC: {glassVariant.NVIC__c}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    RRP: 
                                                    <lightning-formatted-number value={variantNewPrice} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                </td>
                                                <td>
                                                    Trade L: 
                                                    <lightning-formatted-number value={glassVariant.Trade_Low_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                                </td>
                                            </tr>
                                            <td>
                                                Trade: 
                                                <lightning-formatted-number value={glassVariant.Trade_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                            </td>
                                            <td>
                                                Retail: 
                                                <lightning-formatted-number value={glassVariant.Retail_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                            </td>
                                            <tr>
                                                <td style="color: red;">
                                                  {glassVariant.Average_Kms__c}000 Km
                                                </td>
                                                <td align="right">
                                                    <lightning-button name="backToList1" label="List" title="Select" onclick={loadVariantFactoryOptions} ></lightning-button>
                                                </td>
                                            </tr>
                                        </table>
                                        </template>
                                    </template>
                              </template>

                              <!-- isDetailed == 3 -->
                              <template if:true={IsDetail3}>

                                <template if:true={glassVariant}>
                                    <template if:true={glassMake}>

                                <table  width="100%">
                                    <tr>
                                        <td colspan="2" style="background: #0099d0;
                                        color: #ffffff !important;
                                        padding: 5px 10px 5px 15px;
                                        font-weight: bold;">
                                            <span>{glassVariant.Year__c} {glassMake.Name} {glassVariant.Family__c} {glassVariant.Description__c} {glassVariant.Series__c} {glassVariant.Style__c} {glassVariant.CC__c} cc {glassVariant.Engine__c} {glassVariant.Size__c} {glassVariant.Cylinders__c} {glassVariant.Transmission__c}</span>                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <!-- <apex:outputText value="OLDER LIGHT COMMERCIAL" rendered="{!q.Model__r.Type_Source__c = 'OLC'}"/>
                                            <apex:outputText value="OLDER CARS" rendered="{!q.Model__r.Type_Source__c = 'OCG'}"/>
                                            <apex:outputText value="LIGHT COMMERCIAL VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'CVG'}"/>
                                            <apex:outputText value="PASSENGER VEHICLES" rendered="{!q.Model__r.Type_Source__c = 'PVG'}"/> -->

                                            <output if:true={isOlderLightCommercial} >OLDER LIGHT COMMERCIAL</output>
                                            <output if:true={isOlderCars}>OLDER CARS</output>
                                            <output if:true={isLightCommercialVehicles} >LIGHT COMMERCIAL VEHICLES</output>
                                            <output if:true={isPassengerVehicles} >PASSENGER VEHICLES</output>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Date Rel: {glassVariant.Release_Date__c}
                                        </td>
                                        <td>
                                            NVIC: {glassVariant.NVIC__c}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            RRP: 
                                            <lightning-formatted-number value={variantNewPrice} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </td>
                                        <td>
                                            Trade L: 
                                            <lightning-formatted-number value={glassVariant.Trade_Low_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </td>
                                    </tr>
                                    <td>
                                        Trade: 
                                        <lightning-formatted-number value={glassVariant.Trade_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                    </td>
                                    <td>
                                        Retail: 
                                        <lightning-formatted-number value={glassVariant.Retail_Price__c} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                    </td>
                                    <tr>
                                        <td style="color: red;">
                                          {glassVariant.Average_Kms__c}000 Km
                                        </td>
                                        <td align="right">
                                            <lightning-button name="backToList1" label="List" title="Select" onclick={loadVariantFactoryOptions}></lightning-button>
                                        </td>
                                    </tr>
                                </table>
                                </template>
                             </template>
                             </template>
                            <!-- </template> -->
                                          
                                    </div>
                                  </div>
                                </article>
                       

                        <!-- matching records element end-->

                        <footer class="slds-card__footer"></footer>
      
                      <!-- ||||- -->

                       <!-- ||||- -->
                    <template if:true={displayRedbookForm}>
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                          <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                              <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                  <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Redbook Details</span>
                              </span>
                            </div>
                            <div class="slds-media__body">
                              <h2 class="slds-card__header-title">
                                <a href="#" class="slds-card__header-link slds-truncate" title="Redbook Details">
                                  <span>Redbook Details</span>
                                </a>
                              </h2>
                            </div>
                          </header>
                        </div>
                        <template if:true={oppty.data}>
                            <div class="slds-m-around_medium">
                                <p>{Name}</p>
                            </div>
                        </template>
                        <div class="slds-card__body slds-card__body_inner">
                            <lightning-combobox name="family" label="Family" value={family} options={familySelect} onchange={loadFamilyBadgeOptions} required></lightning-combobox>
                            <lightning-combobox name="assetType" label="Badge" value={badgeRedbook} options={badgeSelectRedbook} onchange={loadBadgeVariantOptions}></lightning-combobox>
                            <lightning-combobox name="assetType" label="Variant" value={variantRedbook} options={variantSelectRedbook} onchange={getVehicleKey}></lightning-combobox>
                            <lightning-input name="assetType" label="Redbook Key" value={toName} disabled></lightning-input>
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                    </template>
                      <!-- ||||- -->

                       <!-- ||||- -->
                    <template if:true={dyanamicSection}>
                      <template if:true={assetOptionsSelect}>
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Factory Options</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <a href="#" class="slds-card__header-link slds-truncate" title="Factory Options">
                                <span>Factory Options</span>
                                </a>
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <!-- <lightning-input type="toggle" label="Factory Options" name="factoryOptions"></lightning-input> -->
                            <!-- <template if:true={assetOptionsSelect}> -->
                                <lightning-checkbox-group name="Checkbox Group"
                                    options={assetOptionsSelect}
                                    value={assetOptions}
                                    onchange={calculateFactoryOptions}>
                                </lightning-checkbox-group>
                            <!-- </template> -->
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                      </template>
                    </template>
                      <!-- ||||- -->

                      <!-- ||||- -->
                    <template if:true={dyanamicSection}>
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Estimation</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <a href="#" class="slds-card__header-link slds-truncate" title="Estimation">
                                <span>Estimation</span>
                                </a>
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_striped" cellpadding="5">
                                <tr>
                                    <td width="20%">
                                        <!-- <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>&nbsp; -->
                                    </td>
                                    <td width="20%">RRP</td>
                                    <td width="20%">
                                        Trade Low 
                                    </td>
                                    <td width="20%">
                                        Trade 
                                    </td>
                                    <td width="20%">  
                                        Retail
                                    </td>
                                </tr>
                                <tr>
                                    <td>Glass's Value</td>
                                    <td>
                                        <h3>
                                            <lightning-formatted-number value={variantNewPrice} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </h3>&nbsp;
                                    </td>
                                    <td>
                                        <h3>
                                            <lightning-formatted-number value={tradeLowGlassValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </h3>&nbsp;
                                    </td>
                                    <td>
                                        <h3>
                                            <lightning-formatted-number value={tradeGlassValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </h3>&nbsp;
                                    </td>
                                    <td>
                                        <h3>
                                            <lightning-formatted-number value={retailGlassValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </h3>&nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td>KM Adjustment</td>
                                    <td>&nbsp;</td>
                                    <td>
                                        <h3>
                                            <lightning-formatted-number value={totalTradeLowPriceKms} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </h3>&nbsp;
                                    </td>
                                    <td>
                                        <h3>
                                            <lightning-formatted-number value={totalTradePriceKms} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </h3>&nbsp;
                                    </td>
                                    <td>
                                        <h3>
                                            <lightning-formatted-number value={totalRetailPriceKms} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </h3>&nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td>Value of Options</td>
                                    <td>
                                        <h3>
                                            <lightning-formatted-number value={totalPriceOptions} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </h3>&nbsp;
                                    </td>
                                    <td><h3>
                                        <lightning-formatted-number value={totalTradeLowPriceOptions} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </h3>&nbsp;
                                    </td>
                                    <td><h3>
                                        <lightning-formatted-number value={totalTradePriceOptions} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </h3>&nbsp;</td>
                                    <td><h3>
                                        <lightning-formatted-number value={totalRetailPriceOptions} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        </h3>&nbsp;</td>
                                </tr>
                                <tr>
                                    <td>Adjusted Values</td>
                                    <td>
                                        <lightning-formatted-number value={totalEstimated} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                       &nbsp;
                                    </td>
                                    <td>
                                        <lightning-formatted-number value={tradeLowAdjustedValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                         &nbsp;
                                    </td>
                                    <td>
                                        <lightning-formatted-number value={tradeAdjustedValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                        &nbsp;
                                    </td>
                                    <td>
                                        <lightning-formatted-number value={reatilAdjustedValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number>
                                         &nbsp;
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                    </template>
                      <!-- ||||- -->
                </div>

                <!-- right column -->
                <div class="slds-col slds-size_2-of-3 ">

                    <!-- ||||- -->
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">LTV</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                
                                <span>LTV</span>
                              
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <div class="slds-grid slds-gutters slds-p-around_small form-content">
                                <div class="slds-col">
                                    <lightning-combobox name="lender" label="Lenders" value={lender} onchange={putFeesValue} options={lenderOptions} required></lightning-combobox>
                                    <lightning-input type="number" name="carPrice" label={carLabelPriceSuff} value={carPrice} onchange={carPriceChange} formatter="currency" step="0.01" required></lightning-input>
                                    <lightning-input type="number" name="warranty" placeholder="$" label="Warranty" value={warranty} onchange={warrantyChange} step="0.01"></lightning-input>
                                    <lightning-input type="number" name="calculateKmsAdjustment" label="Actual KM" onchange={calculateKmsAdjustment} value={actualKms}></lightning-input>
                                    <lightning-input type="number" name="RRP" label={ltvValueLabel} value={ltvValue} formatter="currency" step="0.01"  disabled></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-combobox name="typeLoan" label="Type Loan" value={typeLoan} options={typeLoanOptions} onchange={putFeesValue} required></lightning-combobox>
                                    <lightning-input type="number" name="deposit" label="	Deposit/Trade in" onchange={depositChange} formatter="currency" step="0.01" value={deposit}></lightning-input>
                                    <lightning-input type="number" name="gap" label="GAP" value={gap} onchange={gapChange} step="0.01"></lightning-input>
                                    <lightning-input type="number" name="averageKM" label="Average KM" value={averageKM} onchange={averageKMChange}></lightning-input>
                                    <lightning-input type="number" name="NAF" label="NAF" value={ltvNAFValue} formatter="currency" step="0.01" disabled></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-input name="newUsed" label="New/Used" value={newUsed} disabled></lightning-input>
                                    <lightning-input type="number" name="fees" label="Fees" value={fees} onchange={feesChange} formatter="currency" step="0.01" required></lightning-input>
                                    <lightning-input type="number" name="lpi" label="LPI" value={lpi} onchange={lpiChange} step="0.01"></lightning-input>
                                    <lightning-combobox type="text" name="purchaseType" label="Purchase Type" value={opp.Purchase_Type__c} options={purchaseTypeOptions} onchange={selectedPurchaseType}></lightning-combobox>
                                    <lightning-input type="number" name="LVR" label={ltvLvrLabel} value={ltvLvrValue} formatter="percent" step="1"  disabled></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-input  label={carPriceLabel} value={ltvCarAge} disabled></lightning-input>

                                        <output> <p><lightning-formatted-number value={ltvFeeValue} format-style="currency" currency-code="AUD" maximum-fraction-digits="2"></lightning-formatted-number></p></output>
                                   
                                    <lightning-input type="number" label="LTI" value={lti} step="0.01" disabled></lightning-input>
                                  </div>
                            </div>
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                      <!-- ||||- -->

                      <!-- ||||- -->
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Vendor Details (Only mandatory at Formal Approval stage)</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <a href="#" class="slds-card__header-link slds-truncate" title="Vendor Details (Only mandatory at Formal Approval stage)">
                                <span>Vendor Details (Only mandatory at Formal Approval stage)</span>
                                </a>
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <div class="slds-grid slds-gutters slds-p-around_small form-content">
                                <div class="slds-col">
                                    <lightning-combobox name="assetType" label="Dealer Type" value={opp.Dealer_Type__c} options={dealerTypeOptions} onchange={dealerTypeChange}></lightning-combobox>
                                    <lightning-input name="assetType" label="Name" value={opp.Dealer_Name__c} onchange={dealerNameChange}></lightning-input>
                                    <lightning-input type="tel" name="assetType" label="Phone" value={opp.Dealer_Phone_Number__c} onchange={dealerPhoneNoChange}></lightning-input>
                                    <lightning-input name="assetType" label="Street Number" value={opp.Dealer_Street_Number__c} onchange={dealerStreetNoChange} required></lightning-input>
                                    <lightning-input name="assetType" label="Suburb" value={opp.Dealer_Suburb__c} onchange={dealerSuburbChange} required></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-input name="assetType" label="Contact Person" value={opp.Dealer_Contact_Name__c} onchange={dealerContactNameChange}></lightning-input>
                                    <lightning-input type="tel" name="assetType" label="Mobile" value={opp.Dealer_Mobile__c} onchange={dealerMobileNoChange}></lightning-input>
                                    <lightning-input name="assetType" label="Street Address" value={opp.Dealer_Address__c} onchange={dealerAddressChange} required></lightning-input>
                                    <lightning-input type="number" name="assetType" label="Postcode" value={opp.Dealer_Postcode__c} onchange={dealerPostalCodeChange} required></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-input name="assetType" label="Email" value={opp.Dealer_Email__c} onchange={dealerEmailChange}></lightning-input>
                                    <lightning-input name="assetType" label="Unit Number" value={opp.Dealer_Unit_Number__c} onchange={dealerUnitNoChange}></lightning-input>
                                    <lightning-combobox name="assetType" label="Street Type" options={streetTypeOptions_} value={opp.Dealer_Street_Type__c} onchange={dealerStreetTypeChange}></lightning-combobox>
                                    <lightning-combobox name="assetType" label="State" value={opp.Dealer_State__c} options={statesOptions} onchange={dealerStateChange}></lightning-combobox>
                                  </div>
                            </div>
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                      <!-- ||||- -->

                      <!-- ||||- -->
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Vehicle Identification (settlements to complete)</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <a href="#" class="slds-card__header-link slds-truncate" title="Vehicle Identification (settlements to complete)">
                                <span>Vehicle Identification (settlements to complete)</span>
                                </a>
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <div class="slds-grid slds-gutters slds-p-around_small form-content">
                                <div class="slds-col">
                                    <lightning-input name="regoNo" label="Rego No." value={rego} onchange={regoNoChange}></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-combobox name="assetType" label="State" value={regoState} options={statesOptions} onchange={stateChange}></lightning-combobox>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-input name="assetType" label="VIN" value={vin} onchange={VinChange}></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-input name="assetType" label="Engine No" value={engine} onchange={engineChange}></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-input name="assetType" label="Colour" value={colour} onchange={colourChange}></lightning-input>
                                  </div>
                            </div>
                            <template if:true={isSearchCertificateNumber}>
                            <div class="slds-grid slds-gutters slds-p-around_small form-content">
                                <div class="slds-col">
                                    <lightning-input name="assetType" label="Request Proxy Id." value={opp.Application_AssetDetail__r.PPSR_Proxy_Id__c} disabled></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-input name="assetType" label="Last Update" value={opp.Application_AssetDetail__r.PPSR_Proxy_Last_Update__c} disabled></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-input name="assetType" label="PPSR Request No." value={opp.Application_AssetDetail__r.Search_Certificate_Number__c} disabled></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                    <lightning-input name="assetType" label="Note" value={opp.Application_AssetDetail__r.PPSR_Proxy_Message__c} disabled></lightning-input>
                                  </div>
                                  <div class="slds-col">
                                  </div>
                            </div>
                            </template>
                        </div>
                        <footer class="slds-card__footer"></footer>
                      </article>
                      <!-- ||||- -->


                       <!-- ||||- -->
                    <template if:true={isVehicleDetails}>
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                </svg>
                                <span class="slds-assistive-text">Vehicle Details</span>
                            </span>
                            </div>
                            <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <a href="#" class="slds-card__header-link slds-truncate" title="Vehicle Details">
                                <span>LTV</span>
                                </a>
                            </h2>
                            </div>
                        </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                                <div class="slds-grid slds-gutters slds-p-around_small form-content">
                                    <div class="slds-col">
                                            
                                        <lightning-input name="assetType" label="Make" value={makeObject.Name} disabled></lightning-input>
                                        <lightning-input name="assetType" label="GlassCode" value={variantObject.Code__c} disabled></lightning-input>
                                        <lightning-input name="assetType" label="Variant" value={variantObject.Description__c} disabled></lightning-input>
                                        <lightning-input name="assetType" label="Class" value={displayClass} disabled></lightning-input>
                                        <lightning-input name="assetType" label="Transmition" value={variantObject.Transmission__c} disabled></lightning-input>
                                      </div>
                                      <div class="slds-col">
                                        <lightning-input name="assetType" label="Year" value={variantObject.Year__c} disabled></lightning-input>
                                        <lightning-input name="assetType" label="Family" value={variantObject.Family__c} disabled></lightning-input>
                                        <lightning-input name="assetType" label="Style / Body" value={variantObject.Style__c} disabled></lightning-input>
                                        <lightning-input name="assetType" label="Engine" value={variantObject.Engine__c} disabled></lightning-input>
                                        <lightning-input name="assetType" label="Size" value={variantObject.Size__c} disabled></lightning-input>
                                      </div>
                                      <div class="slds-col">
                                        <lightning-input name="assetType" label="NVIC" value={variantObject.NVIC__c} disabled></lightning-input>
                                        <lightning-input name="assetType" label="Release Date" value={variantObject.Release_Date__c} disabled></lightning-input>
                                        <lightning-input name="assetType" label="Series" value={variantObject.Series__c} disabled></lightning-input>
                                        <lightning-input name="assetType" label="CC" value={variantObject.CC__c} disabled></lightning-input>
                                        <lightning-input name="assetType" label="Cylinders" value={variantObject.Cylinders__c} disabled></lightning-input>
                                      </div>
                                      
                                </div>
                            </div>
                      </article>
                      <div class="slds-m-left_medium">
                        <template if:true={assetStandardFeautersData}>
                            <b>Standard Features</b><br>
                            <template for:each={assetStandardFeautersData} for:item="feature">
                                <p key={feature}>
                                    [{feature.code}] {feature.name}
                                </p>
                            </template>
                        </template>
                        
                    </div>
                    </template>
                      <!-- ||||- -->

                      
                      
                </div>
            </div>
        <!-- </lightning-card> -->

    </lightning-card>

    </template>

</template>