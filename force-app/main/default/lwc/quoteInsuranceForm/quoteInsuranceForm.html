<template>
  <lightning-card>
    <div class="c-card-body">
      <div class="slds-grid slds-wrap slds-gutters c-result-data">
        <div class="slds-col c-title-section">
          <span class="c-title">Insurance Product</span>
        </div>
      </div>
      <table class="insuranceTableDetails ">
        <!-- Column headers -->
        <thead>
          <tr>
            <td class="inTableTitle">Type</td>
            <td class="inTableTitle">Product</td>
            <td class="inTableTitle">Retail Price</td>
            <td class="inTableTitle">Commission</td>
            <td class="inTableTitle">Financed/PBM</td>
            <td class="inTableTitle">Term</td>
            <td class="inTableTitle">Payment/w</td>
            <td class="inTableTitle">Actions</td>
          </tr>
        </thead>
        <!-- Form Body -->
        <tbody>
          <!-- Comprehensive -->
          <tr>
            <td class="inTableText c-detail-fields " align="start">
              <lightning-combobox name="mvType" label="MV Type" data-id="mvType-field" value={insuranceForm.mvType}
                placeholder="Select a value" options={mvOptions} onchange={handleFieldChange}
                class="field-x-small-width slds-form__item" variant="label-hidden"></lightning-combobox>
            </td>
            <td class="inTableText" align="center">
              <lightning-combobox name="mvProduct" label="Mv Product" data-id="mvProduct-field"
                value={insuranceForm.mvProduct} placeholder="Select a value" options={mvProductOptions}
                onchange={handleFieldChange} class="slds-form__item field-x-small-width" variant="label-hidden">
              </lightning-combobox>
            </td>
            <td class="inTableText">
              <lightning-input type="number" name="mvRetailPrice" label="mvRetailPrice"
                value={insuranceForm.mvRetailPrice} data-id="mvRetailPrice-field"
                class="slds-form__item field-large-width" variant="label-hidden" formatter="currency" step="0.01"
                placeholder="$0.00" onchange={handleFieldChange}></lightning-input>
            </td>
            <td class="inTableText">
              <lightning-input type="number" name="mvCommission" label="mvCommission" value={insuranceForm.mvCommission}
                data-id="mvCommission-field" class="slds-form__item field-x-small-width" variant="label-hidden"
                formatter="currency" step="0.01" placeholder="$0.00" onchange={handleFieldChange}></lightning-input>
            </td>
            <td class="inTableText" style="text-align:center;" align="center">
              <lightning-formatted-text value='(not applicable)'></lightning-formatted-text>
            </td>
            <td class="inTableText" style="text-align:center;" align="center">
              <lightning-formatted-text value={insuranceForm.mvTerm}></lightning-formatted-text>
            </td>
            <td class="inTableText" align="center">
              <lightning-formatted-number value={insuranceForm.mvPayment} format-style="currency" currency-code="AUD"
                class="c-read-only-field"></lightning-formatted-number>
            </td>
            <td class="inTableText" align="center">
              <lightning-button-group>
                <lightning-button class="actionButton" value="mv-accept" label="Accept" variant="success"
                  onclick={handleAccept}></lightning-button>
                <lightning-button class="actionButton" value="mv-decline" label="Decline" variant="destructive"
                  onclick={handleDecline}></lightning-button>
              </lightning-button-group>
            </td>
          </tr>
          <!-- Comprehensive end -->
          <!-- Shortfall (GAP) -->
          <tr>
            <td class="inTableText c-detail-fields " align="start">
              <lightning-combobox name="shortfallType" label="Shortfall Type" data-id="shortfallType-field"
                value={insuranceForm.shortfallType} placeholder="Select a value" options={shortfallOptions}
                onchange={handleFieldChange} class="field-medium-width slds-form__item" variant="label-hidden">
              </lightning-combobox>
            </td>
            <td class="inTableText" align="center">
              <lightning-combobox name="shortfallProduct" label="Shortfall Product" data-id="shortfallProduct-field"
                value={insuranceForm.shortfallProduct} placeholder="Select a value" options={shortfallProductOptions}
                onchange={handleFieldChange} class="slds-form__item field-small-width" variant="label-hidden"
                read-only={isReadOnly}>
              </lightning-combobox>
            </td>
            <td class="inTableText">
              <template if:true={isDisplayInput}>
                <lightning-input type="number" name="shortfallRetailPrice" label="shortfallRetailPrice"
                  value={insuranceForm.shortfallRetailPrice} data-id="shortfallRetailPrice-field"
                  class="slds-form__item field-medium-width" variant="label-hidden" formatter="currency" step="0.01"
                  placeholder="$0.00" onchange={handleFieldChange}></lightning-input>
              </template>
              <template if:false={isDisplayInput}>
                <lightning-formatted-number value={insuranceForm.shortfallRetailPrice} format-style="currency"
                  currency-code="AUD" class="c-read-only-field"></lightning-formatted-number>
              </template>
              <template if:true={isCalculateGAPBusy}>
                <span class="c-status-icon">
                  <lightning-dynamic-icon type="eq" option="play" alternative-text="Recording in progress">
                  </lightning-dynamic-icon>
                </span>
              </template>
            </td>
            <td class="inTableText">
              <template if:true={isDisplayInput}>
                <lightning-input type="number" name="shortfallCommission" label="shortfallCommission"
                  value={insuranceForm.shortfallCommission} data-id="shortfallCommission-field"
                  class="slds-form__item field-x-small-width" variant="label-hidden" formatter="currency" step="0.01"
                  placeholder="$0.00" onchange={handleFieldChange}></lightning-input>
              </template>
              <template if:false={isDisplayInput}>
                <lightning-formatted-number value={insuranceForm.shortfallCommission} format-style="currency"
                  currency-code="AUD" class="c-read-only-field"></lightning-formatted-number>
              </template>
              <template if:true={isCalculateGAPBusy}>
                <span class="c-status-icon">
                  <lightning-dynamic-icon type="eq" option="play" alternative-text="Recording in progress">
                  </lightning-dynamic-icon>
                </span>
              </template>
            </td>
            <td class="inTableText" style="text-align:center;" align="center">
              <lightning-combobox name="shortfallPBM" label="Shortfall PBM" data-id="shortfallPBM-field"
                value={insuranceForm.shortfallPBM} placeholder="Select a value" options={pbmOptions}
                onchange={handleFieldChange} class="slds-form__item field-x_small-width" variant="label-hidden">
              </lightning-combobox>
            </td>
            <td class="inTableText" style="text-align:center;" align="center">
              <lightning-formatted-text value={insuranceForm.shortfallTerm}></lightning-formatted-text>
            </td>
            <td class="inTableText" align="center">
              <lightning-formatted-number value={insuranceForm.shortfallPayment} format-style="currency"
                currency-code="AUD" class="c-read-only-field"></lightning-formatted-number>
            </td>
            <td class="inTableText" align="center">
              <lightning-button-group>
                <lightning-button class="actionButton" value="shortfall-accept" label="Accept" variant="success"
                  onclick={handleAccept}></lightning-button>
                <lightning-button class="actionButton" value="shortfall-decline" label="Decline" variant="destructive"
                  onclick={handleDecline}></lightning-button>
              </lightning-button-group>
            </td>
          </tr>
          <!-- Shortfall (GAP) end -->
          <!-- LPI -->
          <tr>
            <td class="inTableText c-detail-fields " align="start">
              <lightning-combobox name="LPIType" label="LPI Type" data-id="LPIType-field" value={insuranceForm.LPIType}
                placeholder="Select a value" options={LPIOptions} onchange={handleFieldChange}
                class="field-medium-width slds-form__item" variant="label-hidden">
              </lightning-combobox>
            </td>
            <td class="inTableText" align="center">
              <lightning-combobox name="LPIProduct" label="LPI Product" data-id="LPIProduct-field"
                value={insuranceForm.LPIProduct} placeholder="Select a value" options={LPIProductOptions}
                onchange={handleFieldChange} class="slds-form__item field-small-width" variant="label-hidden">
              </lightning-combobox>
            </td>
            <td class="inTableText">
              <template if:true={isDisplayLPIInput}>
                <lightning-input type="number" name="LPIRetailPrice" label="LPIRetailPrice"
                  value={insuranceForm.LPIRetailPrice} data-id="LPIRetailPrice-field"
                  class="slds-form__item field-medium-width" variant="label-hidden" formatter="currency" step="0.01"
                  placeholder="$0.00" onchange={handleFieldChange}></lightning-input>
              </template>
              <template if:false={isDisplayLPIInput}>
                <lightning-formatted-number value={insuranceForm.LPIRetailPrice} format-style="currency"
                  currency-code="AUD" class="c-read-only-field"></lightning-formatted-number>
              </template>
              <template if:true={isCalculateLPIBusy}>
                <span class="c-status-icon">
                  <lightning-dynamic-icon type="eq" option="play" alternative-text="Recording in progress">
                  </lightning-dynamic-icon>
                </span>
              </template>
            </td>
            <td class="inTableText">
              <template if:true={isDisplayLPIInput}>
                <lightning-input type="number" name="LPICommission" label="LPICommission"
                  value={insuranceForm.LPICommission} data-id="LPICommission-field"
                  class="slds-form__item field-x-small-width" variant="label-hidden" formatter="currency" step="0.01"
                  placeholder="$0.00" onchange={handleFieldChange}></lightning-input>
              </template>
              <template if:false={isDisplayLPIInput}>
                <lightning-formatted-number value={insuranceForm.LPICommission} format-style="currency"
                  currency-code="AUD" class="c-read-only-field"></lightning-formatted-number>
              </template>
              <template if:true={isCalculateLPIBusy}>
                <span class="c-status-icon">
                  <lightning-dynamic-icon type="eq" option="play" alternative-text="Recording in progress">
                  </lightning-dynamic-icon>
                </span>
              </template>
            </td>
            <td class="inTableText" style="text-align:center;" align="center">
              <lightning-combobox name="LPIPBM" label="LPI PBM" data-id="LPIPBM-field" value={insuranceForm.LPIPBM}
                placeholder="Select a value" options={pbmOptions} onchange={handleFieldChange}
                class="slds-form__item field-x_small-width" variant="label-hidden">
              </lightning-combobox>
            </td>
            <td class="inTableText" style="text-align:center;" align="center">
              <template if:true={isDisplayLPIInput}>
                <lightning-combobox name="LPITerm" label="LPI Term" data-id="LPITerm-field"
                  value={insuranceForm.LPITerm} placeholder="Select a value" options={LPITerms}
                  onchange={handleFieldChange} class="field-x_small-width slds-form__item" variant="label-hidden">
                </lightning-combobox>
              </template>
              <template if:false={isDisplayLPIInput}>
                <lightning-formatted-text value={insuranceForm.LPITerm} class="c-read-only-field">
                </lightning-formatted-text>
              </template>
            </td>
            <td class="inTableText" align="center">
              <lightning-formatted-number value={insuranceForm.LPIPayment} format-style="currency" currency-code="AUD"
                class="c-read-only-field"></lightning-formatted-number>
            </td>
            <td class="inTableText" align="center">
              <lightning-button-group>
                <lightning-button class="actionButton" value="LPI-accept" label="Accept" variant="success"
                  onclick={handleAccept}></lightning-button>
                <lightning-button class="actionButton" value="LPI-decline" label="Decline" variant="destructive"
                  onclick={handleDecline}></lightning-button>
              </lightning-button-group>
            </td>
          </tr>
          <!-- LPI end -->
          <!-- Eric Warranty / Integrity -->
          <tr>
            <td class="inTableText c-detail-fields " align="start">
              <lightning-combobox name="warrantyType" label={typeOfAsset} data-id="warrantyType-field"
                value={insuranceForm.warrantyType} placeholder="Select a value" options={warrantyOptions}
                onchange={handleFieldChange} class="field-medium-width slds-form__item" variant={isDisplayAssetType}>
              </lightning-combobox>
            </td>
            <td class="inTableText" align="center">
              <template if:true={isDisplayIntegrityOpts}>
                <div>
                  <lightning-combobox name="integrity type" label="Product Type" data-id="warrantyProduct-field"
                    value={insuranceForm.integrity.type} placeholder="Select a value"
                    options={warrantyProductIntegrityOptions} onchange={handleFieldChange}
                    class="slds-form__item field-small-width">
                  </lightning-combobox>
                </div>
                <div>
                  <lightning-combobox name="integrity category" label="Category" data-id="warrantyProduct-field"
                    value={insuranceForm.integrity.category} placeholder="Select a value"
                    options={warrantyProductIntegrityCategoryOptions} onchange={handleFieldChange}
                    class="slds-form__item field-small-width">
                  </lightning-combobox>
                </div>
                <div>
                  <lightning-combobox name="integrity term" label="Term" data-id="warrantyProduct-field"
                    value={insuranceForm.integrity.term} placeholder="Select a value"
                    options={warrantyProductIntegrityTermOptions} onchange={handleFieldChange}
                    class="slds-form__item field-small-width">
                  </lightning-combobox>
                </div>
                <lightning-checkbox-group name="typeRetail" label="Retail price manually" options={options}
                  value={isTypeRetail} onchange={handleFieldChange} variant="label-hidden" class="inTableText">
                </lightning-checkbox-group>
              </template>
              <template if:false={isDisplayIntegrityOpts}>
                <lightning-combobox name="warrantyProduct" label="Warranty Product" data-id="warrantyProduct-field"
                  value={insuranceForm.warrantyProduct} placeholder="Select a value"
                  options={warrantyProductEricOptions} onchange={handleFieldChange}
                  class="slds-form__item field-small-width" variant="label-hidden">
                </lightning-combobox>
              </template>
            </td>
            <!-- retail price -->
            <td class="inTableText">
              <template if:true={isDisplayIntegrityInput}>
                <lightning-input type="number" name="warrantyRetailPrice" label="warrantyRetailPrice"
                  value={insuranceForm.warrantyRetailPrice} placeholder="$0.00" data-id="warrantyRetailPrice-field"
                  class="slds-form__item field-medium-width" variant="label-hidden" formatter="currency" step="0.01"
                  onchange={handleFieldChange}></lightning-input>
              </template>
              <template if:false={isDisplayIntegrityInput}>
                <lightning-formatted-number value={insuranceForm.warrantyRetailPrice} format-style="currency"
                  currency-code="AUD" class="c-read-only-field"></lightning-formatted-number>
              </template>
              <template if:true={isCalculateWarrantyBusy}>
                <span class="c-status-icon">
                  <lightning-dynamic-icon type="eq" option="play" alternative-text="Recording in progress">
                  </lightning-dynamic-icon>
                </span>
              </template>
            </td>
            <!-- commission -->
            <td class="inTableText">
              <template if:true={isDisplayIntegrityInput}>
                <lightning-input type="number" name="warrantyCommission" label="warrantyCommission"
                  value={insuranceForm.warrantyCommission} placeholder="$0.00" data-id="warrantyCommission-field"
                  class="slds-form__item field-x-small-width" variant="label-hidden" formatter="currency" step="0.01"
                  onchange={handleFieldChange}></lightning-input>
              </template>
              <template if:false={isDisplayIntegrityInput}>
                <lightning-formatted-number value={insuranceForm.warrantyCommission} format-style="currency"
                  currency-code="AUD" class="c-read-only-field"></lightning-formatted-number>
              </template>
              <template if:true={isCalculateWarrantyBusy}>
                <span class="c-status-icon">
                  <lightning-dynamic-icon type="eq" option="play" alternative-text="Recording in progress">
                  </lightning-dynamic-icon>
                </span>
              </template>
            </td>

            <td class="inTableText" style="text-align:center;" align="center">
              <template if:true={isDisplayIntegrityOpts}>
                <lightning-formatted-text value={insuranceForm.warrantyPBM}></lightning-formatted-text>
              </template>
              <template if:false={isDisplayIntegrityOpts}>

                <lightning-combobox name="warrantyPBM" label="Warranty PBM" data-id="warrantyPBM-field"
                  value={insuranceForm.warrantyPBM} placeholder="Select a value" options={pbmOptions}
                  onchange={handleFieldChange} class="slds-form__item field-x_small-width" variant="label-hidden">
                </lightning-combobox>
              </template>
            </td>
            <td class="inTableText" style="text-align:center;" align="center">
              <template if:true={isDisplayIntegrityOpts}>
                <lightning-formatted-text value={insuranceForm.integrity.term}></lightning-formatted-text>
              </template>
              <template if:false={isDisplayIntegrityOpts}>
                <lightning-formatted-text value={insuranceForm.warrantyTerm}></lightning-formatted-text>
              </template>
            </td>
            <td class="inTableText" align="center">
              <lightning-formatted-number value={insuranceForm.warrantyPayment} format-style="currency"
                currency-code="AUD" class="c-read-only-field"></lightning-formatted-number>
            </td>
            <td class="inTableText" align="center">
              <lightning-button-group>
                <lightning-button class="actionButton" value="warranty-accept" label="Accept" variant="success"
                  onclick={handleAccept}></lightning-button>
                <lightning-button class="actionButton" value="warranty-decline" label="Decline" variant="destructive"
                  onclick={handleDecline}></lightning-button>
              </lightning-button-group>
            </td>
          </tr>
          <!-- Eric Warranty / Integrity end -->
        </tbody>
      </table>
      <div class="slds-float_right">
        <lightning-button-group>
          <lightning-button class="slds-m-around_xx-small presentationButton" label="Previous Presentation"
            variant="brand"></lightning-button>
          <lightning-button class="slds-m-around_xx-small presentationButton" label="Send Presentation" variant="brand">
          </lightning-button>
        </lightning-button-group>
      </div>
    </div>
  </lightning-card>
</template>