<template>
  <template if:true={showModal}>
    <section
      role="dialog"
      tabindex="-1"
      aria-labelledby="modal-heading-01"
      aria-modal="true"
      aria-describedby="modal-content-id-1"
      class="slds-modal slds-fade-in-open"
    >
      <div class="slds-modal__container">
        <header class="slds-modal__header">
          <button
            class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
            title="Close"
            onclick={handleClose}
          >
            <lightning-icon
              icon-name="utility:close"
              alternative-text="close"
              variant="inverse"
            ></lightning-icon>
            <span class="slds-assistive-text">Close</span>
          </button>
          <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">
            New Task
          </h2>
        </header>
        <div class="slds-form" role="list">
          <div
            class="slds-modal__content slds-p-around_medium"
            id="modal-content-id-1"
          >
            <lightning-layout>
              <lightning-messages> </lightning-messages>
            </lightning-layout>
            <div class="slds-form__row">
              <lightning-combobox
                      name="subject"
                      label="Subject"
                      data-id="subject-field"
                      value=""
                      placeholder="Select a value"
                      options={subjectOptions}
                      onchange={handleSubjectChange}
                      class="slds-form__item"
                      required
              ></lightning-combobox>
              <lightning-combobox
                      name="status"
                      label="Status"
                      value={formData.status}
                      placeholder="Select a value"
                      options={statusOptions}
                      onchange={handleStatusChange}
                      class="slds-form__item"
                      required
              ></lightning-combobox>
            </div>
            <lightning-layout class="slds-form__row">
              <lightning-combobox
                      name="priority"
                      label="Priority"
                      value={formData.priority}
                      placeholder="Select a value"
                      options={priorityOptions}
                      onchange={handlePriorityChange}
                      class="slds-form__item"
                      required
              ></lightning-combobox>
              <lightning-input 
                type="date" 
                name="dueDate"
                data-id="due-date-field"
                label="Due date" 
                placeholder="DD/MM/YYYY"
                class="slds-form__item"
                onchange={handleDueDateChange}
              ></lightning-input>
            </lightning-layout>
            <lightning-layout class="slds-form__row">
              <lightning-textarea 
                name="comments" 
                label="Comments"
                data-id="comments-field"
                required 
                value="" 
                placeholder="compose your comment" 
                maxlength="500" 
                message-when-too-long="A maximum of 500 characters are allowed." 
                message-when-value-missing="An empty comment cannot be saved." 
                class="slds-form__item"
                onchange={handleCommentsChange}
              ></lightning-textarea>
            </lightning-layout>
            <p>&nbsp;</p>
          </div>
          <footer class="slds-modal__footer">
            <lightning-button
              class="slds-button slds-m-left_x-small"
              type="button"
              label="Cancel"
              onclick={handleClose}
            >
            </lightning-button>
            <lightning-button
              variant="brand"
              type="button"
              label="Save"
              class="slds-button"
              onclick={handleSubmit}
            >
            </lightning-button>
          </footer>
        </div>
      </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
  </template>
</template>