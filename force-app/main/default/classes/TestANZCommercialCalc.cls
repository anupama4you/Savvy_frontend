@isTest(SeeAllData=true)
private class TestANZCommercialCalc {
	
	@isTest static void testCalculator() {
		test.startTest();
        Test_DataGeneratorHelper.createApplication();
        ApexPages.StandardController sc = new ApexPages.StandardController(Test_DataGeneratorHelper.tstOpportunity);
        
        // ANZ Commercial Calculator
        PageReference ANZCommercial = Page.EsandaCommercial;
        ANZCommercial.getParameters().put('id',Test_DataGeneratorHelper.tstOpportunity.Id);
        Test.setCurrentPageReference(ANZCommercial);
        EsandaCommercialExtension ctr = new EsandaCommercialExtension(sc);
        
        ctr.productLoanType = 'Consumer Loan';
        ctr.productGoodsType = 'Car';
        ctr.vehicleAge = '0';
        ctr.carPrice = 50000.00;
        ctr.deposit = 2000.00;
        ctr.residualValue = 1000.00;
        
        // test for baseRateCalc()
        ctr.ltv = '';
        ctr.recommendedRateCalc();
        ctr.baseRate = ctr.recommendedRate;
        ctr.ltv = 'OG';
        ctr.recommendedRateCalc();
        ctr.customerProfile = 'Property Owner - New Car';
        ctr.recommendedRateCalc();
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Property Owner - Old Car';
        ctr.recommendedRateCalc();
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Non Property Owner - New Car';
        ctr.recommendedRateCalc();
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Non Property Owner - Old Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.ltv = '80';
        ctr.customerProfile = '';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Property Owner - New Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Property Owner - Old Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Non Property Owner - New Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Non Property Owner - Old Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.ltv = '130';
        ctr.customerProfile = '';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Property Owner - New Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Property Owner - Old Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Non Property Owner - New Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Non Property Owner - Old Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.ltv = '150';
        ctr.customerProfile = '';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Property Owner - New Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Property Owner - Old Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Non Property Owner - New Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.customerProfile = 'Non Property Owner - Old Car';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.adverseCredit = 'Y';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.term = 72;
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.adverseCredit = 'N';
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.term = 60;
        
        ctr.ltv = '80';
        ctr.customerProfile = 'Property Owner - New Car';
        ctr.clientRate = 5.00;
        ctr.gapLevel = 'Premier Cover 1';
        ctr.gap = 1000.00;
        ctr.gapIncome = 500.00;
        
        // test for WarrantyPriceCalc() and WarrantyIncomeCalc()
        ctr.warrantyPriceCalc();
        ctr.warrantyIncomeCalc();
        ctr.vehicleGroup = '';
        ctr.warrantyPriceCalc();
        ctr.warrantyIncomeCalc();
        ctr.vehicleGroup = '4';
        ctr.warrantyPriceCalc();
        ctr.warrantyIncomeCalc();
        ctr.state = 'WA';
        ctr.warrantyLevel = 'Platinum - 24 months';
        ctr.vehicleGroup = '2';
        ctr.warrantyPriceCalc();
        ctr.vehicleGroup = '3';
        ctr.warrantyPriceCalc();
        ctr.awd = 'Y';
        ctr.turbo = 'Y';
        ctr.diesel = 'Y';
        ctr.warrantyPriceCalc();
        ctr.warrantyIncomeCalc();
        ctr.state = '';
        ctr.warrantyIncomeCalc();
        ctr.state = 'ACT';
        ctr.warrantyIncomeCalc();
        ctr.state = 'NSW';
        ctr.warrantyIncomeCalc();
        ctr.state = 'NT';
        ctr.warrantyIncomeCalc();
        ctr.state = 'VIC';
        ctr.warrantyIncomeCalc();
        ctr.state = 'TAS';
        ctr.warrantyIncomeCalc();
        ctr.state = 'QLD';
        ctr.warrantyIncomeCalc();
        ctr.vehicleGroup = '1';
        ctr.awd = 'N';
        ctr.turbo = 'N';
        ctr.diesel = 'N';
        
        ctr.state = 'SA';
        ctr.warrantyLevel = 'Platinum - 12 months';
        ctr.warrantyPriceCalc();
        ctr.warrantyIncomeCalc();
        ctr.ltiLevel = 'Platinum Cover 1';
        ctr.lti = 2000.00;
        ctr.ltiIncome = 1000.00;
        ctr.truckGapLevel = 'Cover 1';
        ctr.truckGap = 3000.00;
        ctr.truckGapIncome = 1500.00;
        ctr.taiLevel = 'TAI Cover 1 ($5,000)';
        ctr.tai = 4000.00;
        ctr.taiIncome = 2000.00;
        ctr.mvLevel = 'AIC/Eric';
        ctr.mv = 5000.00;
        ctr.mvIncome = 2500.00;
        ctr.cci = 6000.00;
        ctr.cciIncome = 3000.00;
        ctr.nwc = 7000.00;
        ctr.nwcIncome = 3500.00;
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.realtimeNafCalc();
        ctr.calculate();
        ctr.savePreApproval();
        ctr.paymentType = 'Advance';
        ctr.calculate();
        ctr.clientRate = 8.00;
        ctr.calculate();
        ctr.saveQuoting();
        ctr.reset();
        ctr.recommendedRateCalc();         
        ctr.baseRate = ctr.recommendedRate;
        ctr.realtimeNafCalc();
        ctr.calculate();
        ctr.savePreApproval();
        ctr.clientRate = 8.00;
        ctr.calculate();
        ctr.clientRate = 8.00;
        ctr.baseRate = 8.00;
        ctr.term = 0;
        ctr.calculate();
        ctr.saveQuoting();
	}
}